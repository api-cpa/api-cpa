<% if @current_status[:allowed_parameters].empty? %>

  <p>[Impossible de modifier les paramètres du contrat à ce stade]</p>

<% else %>

  <%= simple_form_for @form_values do |f| %>
    <%= error_messages_for(f.object) %>

    <%= f.input :proxy_id, as: :hidden %>
    <%= f.input :client_id, as: :hidden %>

    <div class="form-group row">
      <label class="col-md-3 col-form-label"><%= t('active_record.attributes.contract.client') %></label>
      <div class="col-md-9">
        <h5 class="<%= t("types.service_types.#{f.object.client.service_type}.class") %>"><i class="<%= t("types.service_types.#{f.object.client.service_type}.icon") %>"></i> <%= f.object.client.name %></h5>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-3 col-form-label"><%= t('active_record.attributes.contract.proxy') %></label>
      <div class="col-md-9">
        <h5><i class="fa fa-fw fa-sitemap"></i> <%= f.object.proxy.name %></h5>
        <%= f.object.proxy.description %>
      </div>
    </div>

    <% if @current_status[:allowed_parameters].include?(:code) %>
      <%= f.input :code, input_html: {class: 'col-sm-3'} %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:name) %>
      <%= f.input :name %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:contract_duration_type) %>
      <%= f.input :contract_duration_type, collection: format_contract_duration_types_for_select, input_html: {class: 'col-sm-3'}, include_blank: false %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:expected_start_date) %>
      <%= f.input :expected_start_date, as: :string, input_html: {class: 'date-picker col-sm-3'} %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:expected_end_date) %>
      <%= f.input :expected_end_date, as: :string, input_html: {class: 'date-picker col-sm-3'} %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:expected_contract_duration) %>
      <%= f.input :expected_contract_duration, as: :integer, input_html: {class: 'col-sm-3'}, hint: t('.hints.expected_contract_duration') %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:is_evergreen) %>
      <%= f.input :is_evergreen, as: :radio_buttons, collection: format_boolean_values_for_input %>
    <% end %>

    <%= f.simple_fields_for @new_comment do |f2| %>
      <%= f2.input :body, as: :trix_editor, label: t('actions.add_comment'), required: false, input_html: {rows: 5, name: 'new_comment'} %>
    <% end %>

    <div class="row">
      <div class="actions col-md-9 offset-md-3">
        <%= f.button :submit, value: I18n.t('actions.save'), data: { disable_with: t('actions.save_in_progress') } %>
      </div>
    </div>
  <% end %>

<% end %>