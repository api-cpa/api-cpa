<% if @current_status[:allowed_parameters].empty? %>

  <p>[Impossible de modifier les paramètres du contrat à ce stade]</p>

<% else %>

  <%= simple_form_for @form_values do |f| %>
    <%= error_messages_for(f.object) %>

    <% if @current_status[:allowed_parameters].include?(:code) %>
      <%= f.input :code %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:name) %>
      <%= f.input :name %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:client_id) %>
      <%= f.input :client_id, collection: format_services_for_select(@clients), input_html: {class: 'services-select2'}, include_blank: t('actions.select') %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:proxy_id) %>
      <%= f.input :proxy_id, collection: format_proxies_for_select(@proxies), input_html: {class: 'select2'}, include_blank: t('actions.select') %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:expected_start_date) %>
      <%= f.input :expected_start_date, as: :string, input_html: {class: 'date-picker'} %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:expected_contract_duration) %>
      <%= f.input :expected_contract_duration, as: :integer, hint: t('.hints.expected_contract_duration') %>
    <% end %>

    <% if @current_status[:allowed_parameters].include?(:is_evergreen) %>
      <%= f.input :is_evergreen, as: :radio_buttons, collection: format_boolean_values_for_input %>
    <% end %>

    <div class="row">
      <div class="actions col-md-9 offset-md-3">
        <%= f.button :submit, value: I18n.t('actions.save'), data: { disable_with: t('actions.save_in_progress') } %>
      </div>
    </div>
  <% end %>

<% end %>