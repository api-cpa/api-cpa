<%
  content_for(:page_title, t('.title'))

  content_for(:page_controls) {
    link_to "<i class=\"fa fa-fw fa-trash\"></i> #{t('actions.destroy')}".html_safe,
            service_proxy_route_path(current_service, current_proxy, @route),
            class: 'btn btn-danger',
            data: {
              confirm: "Are you sure?"
            },
            method: :delete
  }
%>

<div class="b-io-content--secondary">
  <div class="container-fluid">

    <h5><%= @route.name %></h5>
    <%= @route.description %>

    <hr>
    <h5>API</h5>
    <div class="form-group row">
      <label for="inputEmail3" class="col-sm-2 col-form-label">Base</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" readonly="readonly" value="<%= current_host %>/api/v1/<%= current_service.subdomain %>/proxies/<%= current_proxy.subdomain %>/routes/<%= @route.subdomain %>">
      </div>
    </div>
    <div class="form-group row">
      <label for="inputEmail3" class="col-sm-2 col-form-label">Request</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" readonly="readonly" value="<%= current_host %>/api/v1/<%= current_service.subdomain %>/proxies/<%= current_proxy.subdomain %>/routes/<%= @route.subdomain %>/request">
      </div>
    </div>
    <div class="form-group row">
      <label for="inputEmail3" class="col-sm-2 col-form-label">Redirection (test)</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" readonly="readonly" value="<%= current_route.uri_test %>">
      </div>
    </div>
    <div class="form-group row">
      <label for="inputEmail3" class="col-sm-2 col-form-label">Redirection (production)</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" readonly="readonly" value="<%= current_route.uri %>">
      </div>
    </div>

  </div>
</div>

<%= render partial: 'shared/measurement',
           locals: {
             show_detail: true,
             input: @measures_input.by_route(current_route).last_month,
             output: @measures_output.by_route(current_route).last_month
           } %>
