
<pre><%= current_request.request_body %></pre>

<%= link_to edit_service_proxy_tester_request_path(current_service, current_proxy, current_request),
            remote: request.xhr?,
            class: 'btn btn-sm btn-secondary' do %>
  <%= t('actions.edit') %>
<% end %>

<div class="row">
  <div class="col-6">

    <%= simple_form_for current_request,
                        url: service_proxy_tester_process_request_path(
                          current_service,
                          current_proxy,
                          id: current_request.id
                        ),
                        remote: request.xhr?,
                        method: :post do |f| %>

      <div class="">
      </div>

      <div class="row">
        <div class="actions col-md-9 offset-md-3">
          <%= f.button :submit,
                       value: I18n.t('actions.test_request_test'),
                       data: { disable_with: t('actions.save_in_progress') } %>
        </div>
      </div>

    <% end %>

  </div>
  <div class="col-6">

    <%= simple_form_for current_request,
                        url: service_proxy_tester_process_request_path(
                          current_service,
                          current_proxy,
                          id: current_request.id
                        ),
                        remote: request.xhr?,
                        method: :post do |f| %>

      <input type="hidden" name="use_test_settings" value="false">

      <div class="row">
        <div class="actions col-md-9 offset-md-3">
          <%= f.button :submit,
                       value: I18n.t('actions.test_request_production'),
                       data: { disable_with: t('actions.save_in_progress') } %>
        </div>
      </div>

    <% end %>

  </div>
</div>

<% if @result.present? %>

  <div>
    <pre class="ace-viewer"
         id="tester-request-ace-viewer"
         data-format="json"><%= JSON.pretty_generate(@result) %></pre>
  </div>

<% end %>